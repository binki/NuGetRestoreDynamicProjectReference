<?xml version="1.0"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!--
      Define/discover dynamic project references. For example,
      wildcard, allow/deny filters, configuration/licensing files.
      This is intended for optionally shippable assemblies.
  -->
  <Target Name="MyCollectDynamicProjectReferences">
    <ItemGroup>
      <MyDynamicProjectReference Include="$(MSBuildThisFileDirectory)../../Injectable/Injectable.csproj"/>
    </ItemGroup>
  </Target>
  <!--
      Let msbuild know about dynamic references so that it can take
      care of dependencies, copying assemblies around.
  -->
  <Target BeforeTargets="BeforeResolveReferences" DependsOnTargets="MyCollectDynamicProjectReferences" Name="MyAddDynamicReferences">
    <ItemGroup>
      <ProjectReference Include="@(MyDynamicProjectReference)"/>
    </ItemGroup>
  </Target>
</Project>
